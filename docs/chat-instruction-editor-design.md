# Chat-based Instruction Editor (Demo)

## ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏ö ‚Äî ‡∏â‡∏ö‡∏±‡∏ö‡πÄ‡∏ï‡πá‡∏°

> **‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà**: 22 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå 2026  
> **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: Draft ‚Äî Design Document  
> **‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ä‡∏ó‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Instruction ‚Üí ‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏™‡∏±‡πà‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö / ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏° / ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç** ‡∏ú‡πà‡∏≤‡∏ô AI Agent

---

## 1. ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö (Overview)

### 1.1 ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏´‡∏•‡∏±‡∏Å

‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô **AI Agent** ‡∏ó‡∏µ‡πà‡∏°‡∏µ tool ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏î‡∏π/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Instruction ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:

1. **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Instruction** ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£
2. **‡πÅ‡∏ä‡∏ó‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô** ‚Äî ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏° ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡πà‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤
3. AI ‡∏à‡∏∞‡πÉ‡∏ä‡πâ **Tool Calling** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á/‡πÅ‡∏Å‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö granular (‡πÑ‡∏°‡πà‡∏™‡πà‡∏á instruction ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
4. ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö **RAG** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

### 1.2 ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á Agent + Tools (‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)

| ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡∏™‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î | ‡πÅ‡∏Å‡πâ‡∏î‡πâ‡∏ß‡∏¢ Agent + Tools |
|---|---|
| Instruction ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏≤‡∏¢‡∏û‡∏±‡∏ô rows ‚Üí ‡πÄ‡∏Å‡∏¥‡∏ô context limit | ‡∏î‡∏∂‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (rows, columns, search) |
| ‡∏™‡πà‡∏á token ‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‚Üí ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏™‡∏π‡∏á | ‡∏î‡∏∂‡∏á‡πÅ‡∏Ñ‡πà‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‚Üí ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î token |
| AI ‡∏≠‡∏≤‡∏à hallucinate ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å | ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á ‚Üí ‡∏ï‡∏≠‡∏ö‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Å‡∏ß‡πà‡∏≤ |
| ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏±‡πâ‡∏á instruction ‚Üí ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á overwrite ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡∏•‡∏∞ row/cell ‚Üí ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢, ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ |

### 1.3 Data Model ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ô `instructions_v2`)

```
Instruction {
  _id, instructionId, name, description,
  dataItems: [
    {
      itemId, title, type: "text" | "table",
      content: string,         // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö type=text
      data: { columns, rows }, // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö type=table
      order, createdAt, updatedAt
    }
  ],
  usageCount, isActive, createdAt, updatedAt
}
```

---

## 2. ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏° (Architecture)

### 2.1 Component Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Frontend (Browser)                    ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Instruction  ‚îÇ  ‚îÇ         Chat Panel               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  Selector    ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ  ‚îÇ    Message History          ‚îÇ  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - List       ‚îÇ  ‚îÇ  ‚îÇ    (user + AI messages)     ‚îÇ  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Search     ‚îÇ  ‚îÇ  ‚îÇ    + Tool result cards      ‚îÇ  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Preview    ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ  ‚îÇ    Input + Send Button      ‚îÇ  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ POST /api/instruction-chat
                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Backend (Node.js)                      ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ Chat Controller ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ  OpenAI API (Tool Loop)   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ   ‚îÇ  - System Prompt           ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Session mgmt ‚îÇ   ‚îÇ  - Tool definitions        ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - History mgmt ‚îÇ   ‚îÇ  - Max 8 tool iterations    ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                   ‚îÇ tool_calls          ‚îÇ
‚îÇ                                   ‚ñº                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ              Tool Executor                        ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  READ Tools          WRITE Tools     RAG Tools    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ           ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  get_overview        update_cell     search_content‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  get_data_item       add_row         find_similar  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  get_rows            delete_row                    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  get_columns         update_text                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  search_in_table     add_data_item                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  get_text_content    rename_item                   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                             ‚ñº                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ   MongoDB          ‚îÇ  ‚îÇ  RAG Index (In-Memory)  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ   instructions_v2  ‚îÇ  ‚îÇ  - Chunk + Embedding    ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.2 Flow ‡∏´‡∏•‡∏±‡∏Å

```
1. ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Instruction ‡∏à‡∏≤‡∏Å sidebar
2. Frontend ‡πÇ‡∏´‡∏•‡∏î overview (‡∏ä‡∏∑‡πà‡∏≠, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô data items, ‡∏™‡∏£‡∏∏‡∏õ)
3. ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á ‡πÄ‡∏ä‡πà‡∏ô "‡∏î‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A"
4. Backend ‡∏™‡πà‡∏á message + history ‚Üí OpenAI (‡∏û‡∏£‡πâ‡∏≠‡∏° tools)
5. AI ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏Å tool ‡πÄ‡∏ä‡πà‡∏ô search_in_table(keyword="‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A")
6. Backend execute tool ‚Üí return ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏´‡πâ AI
7. AI ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
8. (‡∏ñ‡πâ‡∏≤‡∏™‡∏±‡πà‡∏á‡πÅ‡∏Å‡πâ) AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å update_cell(...) ‚Üí Backend ‡πÅ‡∏Å‡πâ DB ‚Üí ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏•‡∏±‡∏ö
```

---

## 3. AI Tools ‚Äî ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

### 3.1 READ Tools (‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)

#### `get_instruction_overview`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á instruction ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡πÑ‡∏°‡πà‡∏î‡∏∂‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)

```json
{
  "name": "get_instruction_overview",
  "description": "‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á instruction: ‡∏ä‡∏∑‡πà‡∏≠, description, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô data items, ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ï‡πà‡∏•‡∏∞ item (title, type, row count, column names) ‚Äî ‡πÑ‡∏°‡πà‡∏î‡∏∂‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏à‡∏£‡∏¥‡∏á",
  "parameters": {}
}
```

**Response ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```json
{
  "name": "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏õ‡∏µ 2026",
  "description": "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà",
  "dataItems": [
    { "itemId": "item_abc123", "title": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î A", "type": "table", "rowCount": 250, "columns": ["‡∏ä‡∏∑‡πà‡∏≠", "‡∏£‡∏´‡∏±‡∏™", "‡∏£‡∏≤‡∏Ñ‡∏≤", "‡∏™‡∏ï‡πá‡∏≠‡∏Å"] },
    { "itemId": "item_def456", "title": "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢", "type": "text", "charCount": 1200 },
    { "itemId": "item_ghi789", "title": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î B", "type": "table", "rowCount": 180, "columns": ["‡∏ä‡∏∑‡πà‡∏≠", "‡∏Ç‡∏ô‡∏≤‡∏î", "‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å", "‡∏£‡∏≤‡∏Ñ‡∏≤"] }
  ]
}
```

#### `get_data_item_detail`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á data item ‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

```json
{
  "name": "get_data_item_detail",
  "description": "‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á data item: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô text ‡∏î‡∏∂‡∏á content ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô, ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô table ‡∏î‡∏∂‡∏á columns + preview 5 rows ‡πÅ‡∏£‡∏Å",
  "parameters": {
    "itemId": { "type": "string", "description": "ID ‡∏Ç‡∏≠‡∏á data item" }
  }
}
```

#### `get_rows`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏î‡∏∂‡∏á‡πÅ‡∏ñ‡∏ß‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á (pagination)

```json
{
  "name": "get_rows",
  "description": "‡∏î‡∏∂‡∏á‡πÅ‡∏ñ‡∏ß‡∏à‡∏≤‡∏Å data item ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡πÅ‡∏ö‡∏ö‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤",
  "parameters": {
    "itemId": { "type": "string" },
    "startRow": { "type": "number", "description": "‡πÅ‡∏ñ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (0-indexed)" },
    "limit": { "type": "number", "description": "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ñ‡∏ß (max 50, default 20)" },
    "columns": {
      "type": "array", "items": { "type": "string" },
      "description": "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (optional, default=‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå)"
    }
  }
}
```

#### `get_text_content`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏î‡∏∂‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ text ‡πÅ‡∏ö‡∏ö chunk

```json
{
  "name": "get_text_content",
  "description": "‡∏î‡∏∂‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡∏≠‡∏á data item ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó text ‡πÅ‡∏ö‡∏ö‡πÅ‡∏ö‡πà‡∏á chunk",
  "parameters": {
    "itemId": { "type": "string" },
    "startChar": { "type": "number", "description": "‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (default 0)" },
    "length": { "type": "number", "description": "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ (max 2000, default 1000)" }
  }
}
```

#### `search_in_table`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á

```json
{
  "name": "search_in_table",
  "description": "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ keyword ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏ (‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå)",
  "parameters": {
    "itemId": { "type": "string" },
    "keyword": { "type": "string" },
    "column": { "type": "string", "description": "‡∏Ñ‡πâ‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ô‡∏µ‡πâ (optional)" },
    "matchMode": {
      "type": "string", "enum": ["contains", "exact", "startsWith"],
      "description": "‡∏ß‡∏¥‡∏ò‡∏µ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà (default: contains)"
    },
    "limit": { "type": "number", "description": "‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (max 30, default 10)" }
  }
}
```

### 3.2 WRITE Tools (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)

#### `update_cell`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô cell ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

```json
{
  "name": "update_cell",
  "description": "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á cell ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ñ‡∏ß‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå",
  "parameters": {
    "itemId": { "type": "string" },
    "rowIndex": { "type": "number", "description": "‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß (0-indexed)" },
    "column": { "type": "string", "description": "‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå" },
    "newValue": { "type": "string", "description": "‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà" }
  }
}
```

#### `update_rows_bulk`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏•‡∏≤‡∏¢ cell ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô

```json
{
  "name": "update_rows_bulk",
  "description": "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏•‡∏≤‡∏¢ cell ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô",
  "parameters": {
    "itemId": { "type": "string" },
    "updates": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "rowIndex": { "type": "number" },
          "column": { "type": "string" },
          "newValue": { "type": "string" }
        }
      }
    }
  }
}
```

#### `add_row`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á

```json
{
  "name": "add_row",
  "description": "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á",
  "parameters": {
    "itemId": { "type": "string" },
    "rowData": {
      "type": "object",
      "description": "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ñ‡∏ß key=‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå value=‡∏Ñ‡πà‡∏≤"
    },
    "position": {
      "type": "string", "enum": ["start", "end", "after"],
      "description": "‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (default: end)"
    },
    "afterRowIndex": { "type": "number", "description": "‡∏ñ‡πâ‡∏≤ position=after ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà index" }
  }
}
```

#### `delete_row`
```json
{
  "name": "delete_row",
  "description": "‡∏•‡∏ö‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á",
  "parameters": {
    "itemId": { "type": "string" },
    "rowIndex": { "type": "number" }
  }
}
```

#### `update_text_content`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ text

```json
{
  "name": "update_text_content",
  "description": "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡∏≠‡∏á data item ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó text ‚Äî ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö replace, append, prepend",
  "parameters": {
    "itemId": { "type": "string" },
    "mode": { "type": "string", "enum": ["replace_all", "find_replace", "append", "prepend"] },
    "content": { "type": "string", "description": "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö replace_all, append, prepend)" },
    "find": { "type": "string", "description": "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏´‡∏≤ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö find_replace)" },
    "replaceWith": { "type": "string", "description": "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö find_replace)" }
  }
}
```

#### `add_column` / `rename_column` / `delete_column`
```json
{
  "name": "add_column",
  "parameters": {
    "itemId": { "type": "string" },
    "columnName": { "type": "string" },
    "defaultValue": { "type": "string" },
    "position": { "type": "string", "enum": ["start", "end", "after"] },
    "afterColumn": { "type": "string" }
  }
}
```

### 3.3 RAG Tools (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞)

#### `search_content`
> **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á instruction (‡∏ó‡∏∏‡∏Å data item) ‡∏î‡πâ‡∏ß‡∏¢ keyword/semantic

```json
{
  "name": "search_content",
  "description": "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á instruction ‚Äî ‡∏Ñ‡πâ‡∏ô‡∏ó‡∏±‡πâ‡∏á text content ‡πÅ‡∏•‡∏∞ table data ‡∏ó‡∏∏‡∏Å item ‚Äî ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô snippet + ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",
  "parameters": {
    "query": { "type": "string", "description": "‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" },
    "limit": { "type": "number", "description": "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (default 5)" }
  }
}
```

**Response ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```json
{
  "results": [
    {
      "itemId": "item_abc123",
      "itemTitle": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î A",
      "type": "table",
      "matchType": "row",
      "rowIndex": 42,
      "snippet": { "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 3 ‡∏ô‡∏¥‡πâ‡∏ß", "‡∏£‡∏≤‡∏Ñ‡∏≤": "2,350" },
      "relevanceScore": 0.92
    },
    {
      "itemId": "item_def456",
      "itemTitle": "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢",
      "type": "text",
      "matchType": "text_chunk",
      "charRange": [200, 450],
      "snippet": "...‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÇ‡∏ü‡∏° PU ‡∏ó‡∏∏‡∏Å‡∏£‡∏∏‡πà‡∏ô‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î 10% ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á...",
      "relevanceScore": 0.85
    }
  ]
}
```

---

## 3.4 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Tool Response ‡∏ó‡∏µ‡πà AI ‡πÄ‡∏´‡πá‡∏ô (‡∏ó‡∏∏‡∏Å Tool)

> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏≠ JSON ‡∏ó‡∏µ‡πà AI ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏à‡∏≤‡∏Å tool ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß (role: `tool` message)

### READ Tools

#### `get_instruction_overview` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô:
```json
{
  "name": "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏õ‡∏µ 2026",
  "description": "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà",
  "totalDataItems": 3,
  "dataItems": [
    { "itemId": "item_abc123", "title": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î A", "type": "table", "rowCount": 250, "columns": ["‡∏ä‡∏∑‡πà‡∏≠", "‡∏£‡∏´‡∏±‡∏™", "‡∏£‡∏≤‡∏Ñ‡∏≤", "‡∏™‡∏ï‡πá‡∏≠‡∏Å"] },
    { "itemId": "item_def456", "title": "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢", "type": "text", "charCount": 1200, "preview": "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á..." },
    { "itemId": "item_ghi789", "title": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î B", "type": "table", "rowCount": 180, "columns": ["‡∏ä‡∏∑‡πà‡∏≠", "‡∏Ç‡∏ô‡∏≤‡∏î", "‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å", "‡∏£‡∏≤‡∏Ñ‡∏≤"] }
  ]
}
```

#### `get_data_item_detail` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô (table):
```json
{
  "itemId": "item_abc123",
  "title": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î A",
  "type": "table",
  "rowCount": 250,
  "columns": ["‡∏ä‡∏∑‡πà‡∏≠", "‡∏£‡∏´‡∏±‡∏™", "‡∏£‡∏≤‡∏Ñ‡∏≤", "‡∏™‡∏ï‡πá‡∏≠‡∏Å"],
  "previewRows": [
    { "rowIndex": 0, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 2 ‡∏ô‡∏¥‡πâ‡∏ß", "‡∏£‡∏´‡∏±‡∏™": "PU-002", "‡∏£‡∏≤‡∏Ñ‡∏≤": "1,850", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "120" },
    { "rowIndex": 1, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 3 ‡∏ô‡∏¥‡πâ‡∏ß", "‡∏£‡∏´‡∏±‡∏™": "PU-003", "‡∏£‡∏≤‡∏Ñ‡∏≤": "2,350", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "45" },
    { "rowIndex": 2, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 4 ‡∏ô‡∏¥‡πâ‡∏ß", "‡∏£‡∏´‡∏±‡∏™": "PU-004", "‡∏£‡∏≤‡∏Ñ‡∏≤": "2,900", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "78" },
    { "rowIndex": 3, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PE 2 ‡∏ô‡∏¥‡πâ‡∏ß", "‡∏£‡∏´‡∏±‡∏™": "PE-002", "‡∏£‡∏≤‡∏Ñ‡∏≤": "980", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "200" },
    { "rowIndex": 4, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PE 3 ‡∏ô‡∏¥‡πâ‡∏ß", "‡∏£‡∏´‡∏±‡∏™": "PE-003", "‡∏£‡∏≤‡∏Ñ‡∏≤": "1,250", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "150" }
  ],
  "hasMore": true,
  "note": "‡πÅ‡∏™‡∏î‡∏á 5 ‡πÅ‡∏ñ‡∏ß‡πÅ‡∏£‡∏Å‡∏à‡∏≤‡∏Å 250 ‡πÅ‡∏ñ‡∏ß ‚Äî ‡πÉ‡∏ä‡πâ get_rows ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"
}
```

#### `get_data_item_detail` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô (text):
```json
{
  "itemId": "item_def456",
  "title": "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢",
  "type": "text",
  "charCount": 1200,
  "preview": "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:\n\n1. ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡∏ä‡∏¥‡πâ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏•‡∏î 5%\n2. ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ 50 ‡∏ä‡∏¥‡πâ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏•‡∏î 10%\n3. ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ 100 ‡∏ä‡∏¥‡πâ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏•‡∏î 15%\n\n‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏≠‡∏∑‡πà‡∏ô...",
  "hasMore": true,
  "note": "‡πÅ‡∏™‡∏î‡∏á 500 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÅ‡∏£‡∏Å‡∏à‡∏≤‡∏Å 1,200 ‚Äî ‡πÉ‡∏ä‡πâ get_text_content ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"
}
```

#### `get_rows` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô:
```json
{
  "itemId": "item_abc123",
  "totalRows": 250,
  "startRow": 40,
  "endRow": 44,
  "columns": ["‡∏ä‡∏∑‡πà‡∏≠", "‡∏£‡∏´‡∏±‡∏™", "‡∏£‡∏≤‡∏Ñ‡∏≤", "‡∏™‡∏ï‡πá‡∏≠‡∏Å"],
  "rows": [
    { "rowIndex": 40, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÅ‡∏ú‡πà‡∏ô‡∏≠‡∏∞‡∏Ñ‡∏£‡∏¥‡∏•‡∏¥‡∏Ñ 3mm", "‡∏£‡∏´‡∏±‡∏™": "AC-003", "‡∏£‡∏≤‡∏Ñ‡∏≤": "450", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "300" },
    { "rowIndex": 41, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÅ‡∏ú‡πà‡∏ô‡∏≠‡∏∞‡∏Ñ‡∏£‡∏¥‡∏•‡∏¥‡∏Ñ 5mm", "‡∏£‡∏´‡∏±‡∏™": "AC-005", "‡∏£‡∏≤‡∏Ñ‡∏≤": "780", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "180" },
    { "rowIndex": 42, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 3 ‡∏ô‡∏¥‡πâ‡∏ß ‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°", "‡∏£‡∏´‡∏±‡∏™": "PUP-003", "‡∏£‡∏≤‡∏Ñ‡∏≤": "3,200", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "22" },
    { "rowIndex": 43, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 4 ‡∏ô‡∏¥‡πâ‡∏ß ‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°", "‡∏£‡∏´‡∏±‡∏™": "PUP-004", "‡∏£‡∏≤‡∏Ñ‡∏≤": "4,100", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "15" },
    { "rowIndex": 44, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÅ‡∏ú‡πà‡∏ô‡πÇ‡∏û‡∏•‡∏µ‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡πÄ‡∏ô‡∏ï", "‡∏£‡∏´‡∏±‡∏™": "PC-001", "‡∏£‡∏≤‡∏Ñ‡∏≤": "1,200", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "90" }
  ],
  "hasMore": true
}
```

#### `get_text_content` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô:
```json
{
  "itemId": "item_def456",
  "totalChars": 1200,
  "startChar": 0,
  "endChar": 500,
  "content": "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:\n\n1. ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡∏ä‡∏¥‡πâ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏•‡∏î 5%\n2. ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ 50 ‡∏ä‡∏¥‡πâ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏•‡∏î 10%\n3. ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ 100 ‡∏ä‡∏¥‡πâ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏•‡∏î 15%\n\n‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏≠‡∏∑‡πà‡∏ô...",
  "hasMore": true
}
```

#### `search_in_table` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô:
```json
{
  "itemId": "item_abc123",
  "keyword": "‡πÇ‡∏ü‡∏° PU",
  "matchMode": "contains",
  "totalMatches": 4,
  "results": [
    { "rowIndex": 0, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 2 ‡∏ô‡∏¥‡πâ‡∏ß", "‡∏£‡∏´‡∏±‡∏™": "PU-002", "‡∏£‡∏≤‡∏Ñ‡∏≤": "1,850", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "120" },
    { "rowIndex": 1, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 3 ‡∏ô‡∏¥‡πâ‡∏ß", "‡∏£‡∏´‡∏±‡∏™": "PU-003", "‡∏£‡∏≤‡∏Ñ‡∏≤": "2,350", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "45" },
    { "rowIndex": 2, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 4 ‡∏ô‡∏¥‡πâ‡∏ß", "‡∏£‡∏´‡∏±‡∏™": "PU-004", "‡∏£‡∏≤‡∏Ñ‡∏≤": "2,900", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "78" },
    { "rowIndex": 42, "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 3 ‡∏ô‡∏¥‡πâ‡∏ß ‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°", "‡∏£‡∏´‡∏±‡∏™": "PUP-003", "‡∏£‡∏≤‡∏Ñ‡∏≤": "3,200", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "22" }
  ]
}
```

### WRITE Tools

#### `update_cell` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô:
```json
{
  "success": true,
  "itemId": "item_abc123",
  "rowIndex": 1,
  "column": "‡∏£‡∏≤‡∏Ñ‡∏≤",
  "before": "2,350",
  "after": "2,500",
  "changeId": "chg_a1b2c3"
}
```

#### `update_rows_bulk` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô:
```json
{
  "success": true,
  "itemId": "item_abc123",
  "updatedCount": 3,
  "changes": [
    { "rowIndex": 0, "column": "‡∏£‡∏≤‡∏Ñ‡∏≤", "before": "1,850", "after": "1,950" },
    { "rowIndex": 1, "column": "‡∏£‡∏≤‡∏Ñ‡∏≤", "before": "2,500", "after": "2,600" },
    { "rowIndex": 2, "column": "‡∏£‡∏≤‡∏Ñ‡∏≤", "before": "2,900", "after": "3,000" }
  ],
  "changeId": "chg_d4e5f6"
}
```

#### `add_row` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô:
```json
{
  "success": true,
  "itemId": "item_abc123",
  "newRowIndex": 250,
  "rowData": { "‡∏ä‡∏∑‡πà‡∏≠": "Foam XL", "‡∏£‡∏´‡∏±‡∏™": "FXL-001", "‡∏£‡∏≤‡∏Ñ‡∏≤": "4,500", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "20" },
  "newTotalRows": 251,
  "changeId": "chg_g7h8i9"
}
```

#### `delete_row` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô:
```json
{
  "success": true,
  "itemId": "item_abc123",
  "deletedRowIndex": 42,
  "deletedData": { "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏ü‡∏° PU 3 ‡∏ô‡∏¥‡πâ‡∏ß ‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°", "‡∏£‡∏´‡∏±‡∏™": "PUP-003", "‡∏£‡∏≤‡∏Ñ‡∏≤": "3,200", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "22" },
  "newTotalRows": 249,
  "changeId": "chg_j0k1l2"
}
```

#### `update_text_content` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô (find_replace):
```json
{
  "success": true,
  "itemId": "item_def456",
  "mode": "find_replace",
  "find": "‡∏•‡∏î 10%",
  "replaceWith": "‡∏•‡∏î 12%",
  "matchesReplaced": 1,
  "changeId": "chg_m3n4o5"
}
```

### RAG Tool

#### `search_content` ‚Üí AI ‡πÄ‡∏´‡πá‡∏ô:
```json
{
  "query": "‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô",
  "totalResults": 3,
  "results": [
    {
      "itemId": "item_def456",
      "itemTitle": "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢",
      "type": "text",
      "matchType": "text_chunk",
      "charRange": [0, 350],
      "snippet": "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:\n1. ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡∏ä‡∏¥‡πâ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏•‡∏î 5%...",
      "relevanceScore": 0.95
    },
    {
      "itemId": "item_abc123",
      "itemTitle": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î A",
      "type": "table",
      "matchType": "row",
      "rowIndex": 15,
      "snippet": { "‡∏ä‡∏∑‡πà‡∏≠": "‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏ã‡πá‡∏ï A+B", "‡∏£‡∏≤‡∏Ñ‡∏≤": "5,500", "‡∏™‡∏ï‡πá‡∏≠‡∏Å": "50" },
      "relevanceScore": 0.78
    }
  ]
}
```

> **‡∏™‡∏£‡∏∏‡∏õ**: ‡∏ó‡∏∏‡∏Å tool ‡∏à‡∏∞ return ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö **structured JSON** ‡∏ó‡∏µ‡πà‡∏°‡∏µ:
> - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏£‡∏¥‡∏á (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
> - `rowIndex` ‡πÄ‡∏û‡∏∑‡πà‡∏≠ reference ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô
> - `before`/`after` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö write tools ‡πÄ‡∏û‡∏∑‡πà‡∏≠ confirm ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
> - `changeId` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö undo
> - `hasMore` flag ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö pagination

## 4. ‡∏£‡∏∞‡∏ö‡∏ö RAG (Retrieval-Augmented Generation)

### 4.1 ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå RAG

‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å instruction ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å ‡∏£‡∏∞‡∏ö‡∏ö RAG ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ AI ‡∏´‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏∂‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         RAG Pipeline                     ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  1. Indexing (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å instruction)    ‚îÇ
‚îÇ     ‚îú‚îÄ Text items ‚Üí chunk 500 chars     ‚îÇ
‚îÇ     ‚îú‚îÄ Table items ‚Üí index per row      ‚îÇ
‚îÇ     ‚îî‚îÄ Store in memory (per session)    ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  2. Retrieval (‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å search)    ‚îÇ
‚îÇ     ‚îú‚îÄ Keyword matching (BM25-like)     ‚îÇ
‚îÇ     ‚îú‚îÄ Fuzzy matching (Levenshtein)     ‚îÇ
‚îÇ     ‚îî‚îÄ Return top-k + metadata          ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  3. (Optional) Embedding-based          ‚îÇ
‚îÇ     ‚îú‚îÄ OpenAI text-embedding-3-small    ‚îÇ
‚îÇ     ‚îî‚îÄ Cosine similarity ranking        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4.2 Indexing Strategy

| ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£ Index | Chunk Size |
|---|---|---|
| `text` content | ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô chunk 500 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ overlap 50 | 500 chars |
| `table` row | ‡πÅ‡∏ï‡πà‡∏•‡∏∞ row ‡πÄ‡∏õ‡πá‡∏ô 1 document (stringify key-value) | 1 row |
| `table` column header | Index ‡∏ä‡∏∑‡πà‡∏≠ column ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á | ‚Äî |

### 4.3 Demo vs Production

| Feature | Demo (Phase 1) | Production (Phase 2) |
|---|---|---|
| Search | Keyword-based (string match) | Embedding-based (semantic) |
| Index | In-memory per session | Persistent (Redis/MongoDB) |
| Rebuild | ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å instruction | Incremental (on change) |

---

## 5. API Endpoints ‡πÉ‡∏´‡∏°‡πà

### 5.1 Chat Endpoint

```
POST /api/instruction-chat
```

**Request Body:**
```json
{
  "instructionId": "ObjectId string",
  "message": "‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A ‡∏´‡∏ô‡πà‡∏≠‡∏¢",
  "sessionId": "chat_session_xxx",
  "history": [
    { "role": "user", "content": "..." },
    { "role": "assistant", "content": "..." }
  ]
}
```

**Response (Streaming):**
```json
{
  "role": "assistant",
  "content": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A ‡∏°‡∏µ‡∏£‡∏≤‡∏Ñ‡∏≤ 2,350 ‡∏ö‡∏≤‡∏ó ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î...",
  "toolsUsed": [
    { "tool": "search_in_table", "itemId": "item_abc", "keyword": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A", "resultCount": 1 }
  ],
  "changes": []
}
```

### 5.2 Session Management

```
POST   /api/instruction-chat/sessions          ‚Äî ‡∏™‡∏£‡πâ‡∏≤‡∏á session ‡πÉ‡∏´‡∏°‡πà
GET    /api/instruction-chat/sessions/:id       ‚Äî ‡∏î‡∏∂‡∏á session + history
DELETE /api/instruction-chat/sessions/:id       ‚Äî ‡∏•‡∏ö session
```

### 5.3 Undo/Changelog

```
GET  /api/instruction-chat/sessions/:id/changelog   ‚Äî ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
POST /api/instruction-chat/sessions/:id/undo/:changeId  ‚Äî ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
```

---

## 6. Frontend Design

### 6.1 Layout

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üîß Instruction Editor Chat                          [‚â°]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                ‚îÇ                                            ‚îÇ
‚îÇ üìã Instructions‚îÇ  üí¨ Chat with AI                          ‚îÇ
‚îÇ                ‚îÇ                                            ‚îÇ
‚îÇ [üîç Search...] ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ ü§ñ ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å instruction      ‚îÇ ‚îÇ
‚îÇ ‚ñ∏ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‚îÇ  ‚îÇ    ‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£     ‚îÇ ‚îÇ
‚îÇ   250 rows     ‚îÇ  ‚îÇ                                      ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ üë§ ‡∏î‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A ‡∏´‡∏ô‡πà‡∏≠‡∏¢               ‚îÇ ‚îÇ
‚îÇ ‚ñ∏ ‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢   ‚îÇ  ‚îÇ                                      ‚îÇ ‚îÇ
‚îÇ   1.2k chars   ‚îÇ  ‚îÇ ü§ñ [üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A"...]          ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ    ‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A ‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å"     ‚îÇ ‚îÇ
‚îÇ ‚ñ∏ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ B     ‚îÇ  ‚îÇ    ‡∏£‡∏≤‡∏Ñ‡∏≤: 2,350 ‡∏ö‡∏≤‡∏ó                   ‚îÇ ‚îÇ
‚îÇ   180 rows     ‚îÇ  ‚îÇ    ‡∏™‡∏ï‡πá‡∏≠‡∏Å: 45 ‡∏ä‡∏¥‡πâ‡∏ô                    ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ                                      ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ üë§ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡πá‡∏ô 2,500              ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ                                      ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ ü§ñ [‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç row 42, col "‡∏£‡∏≤‡∏Ñ‡∏≤"]      ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ    ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A              ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ    ‡∏à‡∏≤‡∏Å 2,350 ‚Üí 2,500 ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢       ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                ‚îÇ                                            ‚îÇ
‚îÇ                ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê [Send]  ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á...                ‚îÇ         ‚îÇ
‚îÇ                ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìù Changes: 1 edit  ‚îÇ  ‚Ü©Ô∏è Undo Last  ‚îÇ  üìä Token: 1.2k   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 6.2 Tool Result Cards (‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô Chat)

‡πÄ‡∏ß‡∏•‡∏≤ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å tool ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á **inline card** ‡πÉ‡∏ô chat:

- üîç **Search Card**: ‡πÅ‡∏™‡∏î‡∏á keyword + ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå + preview
- üìä **Table View Card**: ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á mini (expandable)
- ‚úèÔ∏è **Edit Card**: ‡πÅ‡∏™‡∏î‡∏á before/after + ‡∏õ‡∏∏‡πà‡∏° Undo
- ‚ûï **Add Card**: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°
- üóëÔ∏è **Delete Card**: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏•‡∏ö + ‡∏õ‡∏∏‡πà‡∏° Restore

### 6.3 Quick Actions (‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏±‡∏î)

‡πÉ‡∏ï‡πâ chat input ‡∏°‡∏µ suggestion chips:

```
[ üìã ‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° ] [ üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ] [ üìä ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á ] [ ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤ ] [ ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß ]
```

### 6.4 Model Selection & Reasoning Configuration

> UI ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û ‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢ ChatGPT / Vercel AI ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÅ‡∏•‡∏∞ Thinking ‡πÑ‡∏î‡πâ

#### 6.4.1 ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö (Thinking + Tool Calling)

‚ö†Ô∏è **‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**: ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö **‡∏ó‡∏±‡πâ‡∏á** reasoning (thinking) **‡πÅ‡∏•‡∏∞** tool calling ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

| ‡πÇ‡∏°‡πÄ‡∏î‡∏• | Reasoning | Tool Calling | reasoning_effort options | API Mode | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ |
|---|---|---|---|---|---|
| **`gpt-5.2`** ‚≠ê (default) | ‚úÖ | ‚úÖ | `none`, `low`, `medium`, `high`, `xhigh` | Chat Completions | ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ‚Äî ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tool use + reasoning |
| **`gpt-5.2-codex`** | ‚úÖ | ‚úÖ | `none`, `low`, `medium`, `high`, `xhigh` | Chat Completions | ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô structured data + code |
| `gpt-5.1` | ‚úÖ | ‚úÖ | `none`, `low`, `medium`, `high` | Chat Completions | ‡πÑ‡∏°‡πà‡∏°‡∏µ xhigh ‡πÅ‡∏ï‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£ |
| `gpt-5` | ‚úÖ (router) | ‚úÖ | `low`, `medium`, `high` | Chat Completions | Router model ‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å sub-model ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ |

> **‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö**: ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ tool calling (‡πÄ‡∏ä‡πà‡∏ô o1-preview) ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ reasoning (‡πÄ‡∏ä‡πà‡∏ô gpt-4o, gpt-4.5)

#### 6.4.2 Reasoning Effort ‚Äî ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£

| Level | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ | Use Case | Token Usage | ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß |
|---|---|---|---|---|
| `none` | ‡πÑ‡∏°‡πà‡∏Ñ‡∏¥‡∏î ‡∏ï‡∏≠‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ | ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏á‡πà‡∏≤‡∏¢, ‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° | ‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î | ‚ö° ‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å |
| `low` | ‡∏Ñ‡∏¥‡∏î‡∏ô‡πâ‡∏≠‡∏¢ | ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ, ‡∏≠‡πà‡∏≤‡∏ô | ‡∏ï‡πà‡∏≥ | ‚ö° ‡πÄ‡∏£‡πá‡∏ß |
| `medium` | ‡∏™‡∏°‡∏î‡∏∏‡∏• (default thinking) | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô | ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á | ‚è±Ô∏è ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á |
| `high` | ‡∏Ñ‡∏¥‡∏î‡∏•‡∏∂‡∏Å | ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô, ‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ | ‡∏™‡∏π‡∏á | üê¢ ‡∏ä‡πâ‡∏≤ |
| `xhigh` | ‡∏Ñ‡∏¥‡∏î‡∏•‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î, multi-step reasoning | ‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å | üêå ‡∏ä‡πâ‡∏≤‡∏°‡∏≤‡∏Å |

#### 6.4.3 UI ‚Äî Model Selector (‡∏™‡πÑ‡∏ï‡∏•‡πå ChatGPT / Vercel)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üîß Instruction Editor Chat                          [‚â°]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                ‚îÇ                                            ‚îÇ
‚îÇ üìã Instructions‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ  Model: [GPT-5.2 ‚ñæ]  Thinking: [ON]  ‚îÇ ‚îÇ
‚îÇ ...            ‚îÇ  ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ  üí¨ Chat Messages...                 ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ                                      ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ  ü§ñ ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö!                       ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ      ‚îå‚îÄ üí≠ Thinking ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ      ‚îÇ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A   ‚îÇ  ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ      ‚îÇ ‡∏û‡∏ö 2 ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á...     ‚îÇ  ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ    ‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A ‡∏£‡∏≤‡∏Ñ‡∏≤ 2,350 ‡∏ö‡∏≤‡∏ó         ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ                                      ‚îÇ ‚îÇ
‚îÇ                ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                ‚îÇ                                            ‚îÇ
‚îÇ                ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê [Send]  ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á...                ‚îÇ         ‚îÇ
‚îÇ                ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚ö°    ‚îÇ
‚îÇ                ‚îÇ                                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üß† GPT-5.2 ‚îÇ Thinking: Medium ‚îÇ üìä 1.2k tokens ‚îÇ ‚Ü©Ô∏è Undo ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 6.4.4 Model Selector Dropdown (‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üß† ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏°‡πÄ‡∏î‡∏•                       ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  ‚≠ê GPT-5.2              ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥      ‚îÇ
‚îÇ     ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß      ‚îÇ
‚îÇ     ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥                     ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  üîß GPT-5.2 Codex                   ‚îÇ
‚îÇ     ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö structured data        ‚îÇ
‚îÇ     ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≠‡∏ô             ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  ‚ö° GPT-5.1                          ‚îÇ
‚îÇ     ‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤ ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏Å‡∏ß‡πà‡∏≤               ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  üîÄ GPT-5 (Router)                  ‚îÇ
‚îÇ     ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å sub-model ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥         ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üí≠ Thinking                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ [Off] [Low] [Med] [High] [Max] ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  Off = none, Low = low, Med = medium ‚îÇ
‚îÇ  High = high, Max = xhigh            ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  ‚ö†Ô∏è GPT-5.1 ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Max (xhigh)   ‚îÇ
‚îÇ  ‚ö†Ô∏è GPT-5 ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Off (none)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 6.4.5 Thinking Display ‡πÉ‡∏ô Chat (‡∏™‡πÑ‡∏ï‡∏•‡πå ChatGPT)

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î Thinking ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á **collapsible thinking block** ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö:

```
ü§ñ AI Response:
  ‚îå‚îÄ üí≠ Thought for 3.2s ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ [‚ñæ Collapse] ‚îÄ‚îê
  ‚îÇ 1. ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A" ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á                 ‚îÇ
  ‚îÇ 2. ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å search_in_table ‡∏Å‡∏±‡∏ö item_abc123             ‚îÇ
  ‚îÇ 3. ‡∏û‡∏ö 2 ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå ‡∏ó‡∏µ‡πà row 1 ‡πÅ‡∏•‡∏∞ row 42                    ‚îÇ
  ‚îÇ 4. ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á 2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£                   ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

  ‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:
  1. ‡πÇ‡∏ü‡∏° PU 3 ‡∏ô‡∏¥‡πâ‡∏ß (‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô) ‚Äî ‡∏£‡∏≤‡∏Ñ‡∏≤ 2,350 ‡∏ö‡∏≤‡∏ó, ‡∏™‡∏ï‡πá‡∏≠‡∏Å 45
  2. ‡πÇ‡∏ü‡∏° PU 3 ‡∏ô‡∏¥‡πâ‡∏ß (‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°) ‚Äî ‡∏£‡∏≤‡∏Ñ‡∏≤ 3,200 ‡∏ö‡∏≤‡∏ó, ‡∏™‡∏ï‡πá‡∏≠‡∏Å 22
```

#### 6.4.6 API Implementation ‚Äî Reasoning Configuration

```javascript
// Backend: ‡∏™‡∏£‡πâ‡∏≤‡∏á API payload ‡∏ï‡∏≤‡∏°‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
function buildChatPayload(model, messages, tools, thinkingLevel) {

  // Model-specific reasoning_effort mapping
  const REASONING_SUPPORT = {
    'gpt-5.2':       { efforts: ['none', 'low', 'medium', 'high', 'xhigh'], default: 'none' },
    'gpt-5.2-codex': { efforts: ['none', 'low', 'medium', 'high', 'xhigh'], default: 'none' },
    'gpt-5.1':       { efforts: ['none', 'low', 'medium', 'high'],          default: 'none' },
    'gpt-5':         { efforts: ['low', 'medium', 'high'],                  default: 'medium' },
  };

  // UI label ‚Üí API value mapping
  const THINKING_MAP = {
    'off':    'none',
    'low':    'low',
    'medium': 'medium',
    'high':   'high',
    'max':    'xhigh',
  };

  const modelConfig = REASONING_SUPPORT[model];
  if (!modelConfig) throw new Error(`Unsupported model: ${model}`);

  // Map UI thinking level to API reasoning_effort
  let effort = THINKING_MAP[thinkingLevel] || modelConfig.default;

  // Fallback if model doesn't support the requested level
  if (!modelConfig.efforts.includes(effort)) {
    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å level ‡∏ó‡∏µ‡πà‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö ‚Üí fallback ‡πÑ‡∏õ‡∏ó‡∏µ‡πà max ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
    const maxSupported = modelConfig.efforts[modelConfig.efforts.length - 1];
    console.warn(`Model ${model} doesn't support ${effort}, falling back to ${maxSupported}`);
    effort = maxSupported;
  }

  const payload = {
    model,
    messages,
    tools,
    tool_choice: 'auto',
  };

  // ‡πÄ‡∏û‡∏¥‡πà‡∏° reasoning config ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠ effort ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 'none'
  if (effort !== 'none') {
    payload.reasoning = { effort };
    // reasoning models ‡∏à‡∏∞ return reasoning content (thinking tokens)
    // ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô UI ‡πÑ‡∏î‡πâ
  }

  return payload;
}
```

#### 6.4.7 Thinking Tokens ‚Äî ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•

```javascript
// Response ‡∏à‡∏≤‡∏Å OpenAI ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î reasoning:
{
  "choices": [{
    "message": {
      "role": "assistant",
      "content": "‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£...",
      // Reasoning content (thinking tokens) ‚Äî ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô collapsible block
      "reasoning_content": "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ \"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A\"...",
      "tool_calls": [...]
    }
  }],
  "usage": {
    "prompt_tokens": 450,
    "completion_tokens": 120,
    "reasoning_tokens": 85,     // ‚Üê thinking tokens (‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡πÉ‡∏ô completion)
    "total_tokens": 655
  }
}
```

> **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**: `reasoning_tokens` ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏¥‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏¢‡∏Å ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡∏≤‡∏° effort level  
> ‡πÅ‡∏™‡∏î‡∏á badge ‡∏ö‡∏≠‡∏Å token usage ‡∏ó‡∏µ‡πà status bar ‡∏•‡πà‡∏≤‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡πâ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô

---

## 7. System Prompt (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AI Agent)

```markdown
‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô AI ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Instruction ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö ChatCenter AI
‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ tools ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô instruction ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å

## ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
1. **‡∏≠‡πà‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ**: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å get_instruction_overview ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏î‡∏π
2. **‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏∂‡∏á**: ‡πÉ‡∏ä‡πâ search_in_table ‡∏´‡∏£‡∏∑‡∏≠ search_content ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡πà‡∏≠‡∏ô
3. **‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô**: ‡πÉ‡∏ä‡πâ update_cell ‡∏´‡∏£‡∏∑‡∏≠ update_rows_bulk ‚Äî ‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ‡∏ó‡∏±‡πâ‡∏á item
4. **‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ**: ‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡∏≠‡∏∞‡πÑ‡∏£ ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å write tool (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏±‡πà‡∏á‡∏ï‡∏£‡∏á)
5. **‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô**: ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡πÅ‡∏à‡πâ‡∏á before ‚Üí after ‡πÄ‡∏™‡∏°‡∏≠

## ‡∏Ç‡πâ‡∏≠‡∏´‡πâ‡∏≤‡∏°
- ‡∏´‡πâ‡∏≤‡∏°‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡πÉ‡∏ä‡πâ pagination)
- ‡∏´‡πâ‡∏≤‡∏°‡∏Ñ‡∏≤‡∏î‡πÄ‡∏î‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÉ‡∏´‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏™‡∏°‡∏≠
- ‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

## Instruction ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
ID: {{instructionId}}
‡∏ä‡∏∑‡πà‡∏≠: {{instructionName}}
‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢: {{instructionDescription}}

## ‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ (Data Items Summary)
{{#each dataItems}}
- **{{title}}** (ID: {{itemId}}, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: {{type}})
  {{#if isTable}}‡∏ï‡∏≤‡∏£‡∏≤‡∏á {{rowCount}} ‡πÅ‡∏ñ‡∏ß | ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå: {{columns}}{{/if}}
  {{#if isText}}‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° {{charCount}} ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£{{/if}}
{{/each}}

‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å data item ‡πÑ‡∏´‡∏ô
‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å get_instruction_overview ‡∏ã‡πâ‡∏≥ ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡πÅ‡∏•‡πâ‡∏ß
```

> **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: Backend ‡∏à‡∏∞ inject summary ‡∏ô‡∏µ‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á system prompt ‡πÇ‡∏î‡∏¢‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å DB ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ metadata (‡πÑ‡∏°‡πà‡∏î‡∏∂‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏à‡∏£‡∏¥‡∏á) ‡πÄ‡∏ä‡πà‡∏ô:
> - ‡∏ä‡∏∑‡πà‡∏≠ data item, type, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ñ‡∏ß, ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
> - ‡∏ó‡∏≥‡πÉ‡∏´‡πâ AI ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô "‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á" ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å tool

---

## 8. Changelog & Undo System

### 8.1 ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Change Log

```json
{
  "changeId": "chg_xxx",
  "sessionId": "ses_xxx",
  "instructionId": "ObjectId",
  "timestamp": "2026-02-22T21:50:00Z",
  "tool": "update_cell",
  "params": { "itemId": "item_abc", "rowIndex": 42, "column": "‡∏£‡∏≤‡∏Ñ‡∏≤", "newValue": "2500" },
  "before": { "value": "2350" },
  "after": { "value": "2500" },
  "undone": false
}
```

### 8.2 Undo Flow

1. ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î "Undo" ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î"
2. Backend ‡∏î‡∏∂‡∏á last change ‚Üí apply reverse operation
3. Mark change as `undone: true`
4. AI ‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏•‡∏Å‡∏•‡∏±‡∏ö

---

## 9. ‡πÅ‡∏ú‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤ (Implementation Phases)

### Phase 1: MVP (1-2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)
- [x] Frontend: ‡∏´‡∏ô‡πâ‡∏≤ chat + instruction selector
- [x] Backend: Chat endpoint + Tool Loop (OpenAI)
- [x] READ Tools: `get_instruction_overview`, `get_data_item_detail`, `get_rows`, `search_in_table`, `get_text_content`
- [x] WRITE Tools: `update_cell`, `add_row`, `delete_row`
- [x] RAG: Keyword-based search (simple string match)
- [x] Session management (in-memory)
- [x] Model selection (GPT-5.2, GPT-5.2 Codex, GPT-5.1, GPT-5)
- [x] Thinking level configuration (off/low/medium/high/max)

### Phase 2: Enhanced (1-2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°)
- [x] WRITE Tools: `update_rows_bulk`, `update_text_content`, `add_column`
- [x] RAG: Embedding-based search (text-embedding-3-large, 256 dims, hybrid RRF)
- [x] Changelog + Undo system
- [x] Streaming responses (SSE)
- [x] Tool result cards (expandable UI)
- [x] Thinking block display (collapsible)
- [x] System prompt auto-injection (data items summary)

### Phase 3: Production Ready
- [x] Session persistence (MongoDB)
- [x] Audit log (who edited what, when, which tools, token usage)
- [x] Bulk operations safety (delete_rows_bulk with 2-step confirmation token)

---

## 10. Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

| File | Action | Status | Description |
|---|---|---|---|
| `views/admin-instruction-chat.ejs` | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà | ‚úÖ Done | ‡∏´‡∏ô‡πâ‡∏≤ HTML ‡∏´‡∏•‡∏±‡∏Å ‚Äî dark theme, premium UI |
| `public/js/instruction-chat.js` | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà | ‚úÖ Done | Frontend logic (chat, tool cards, model selector) |
| `public/css/instruction-chat.css` | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà | ‚úÖ Done | Styles ‚Äî ChatGPT/Vercel style |
| `services/instructionChatService.js` | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà | ‚úÖ Done | Tool executor + changelog |
| `services/instructionRAGService.js` | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà | ‚úÖ Done | RAG keyword-based search |
| `index.js` | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç | ‚úÖ Done | ‡πÄ‡∏û‡∏¥‡πà‡∏° routes + API + tool loop |

---

## 11. ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Use Cases)

### Case 1: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
```
üë§ "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠ PU Foam 3 ‡∏ô‡∏¥‡πâ‡∏ß ‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£"
ü§ñ [‡πÄ‡∏£‡∏µ‡∏¢‡∏Å search_in_table ‚Üí ‡∏û‡∏ö 2 ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå]
   "‡∏û‡∏ö 2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:
    1. PU Foam 3 ‡∏ô‡∏¥‡πâ‡∏ß (‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô) ‚Äî ‡∏£‡∏≤‡∏Ñ‡∏≤ 2,350 ‡∏ö‡∏≤‡∏ó
    2. PU Foam 3 ‡∏ô‡∏¥‡πâ‡∏ß (‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°) ‚Äî ‡∏£‡∏≤‡∏Ñ‡∏≤ 3,200 ‡∏ö‡∏≤‡∏ó"
```

### Case 2: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
```
üë§ "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤ PU Foam 3 ‡∏ô‡∏¥‡πâ‡∏ß ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡πÄ‡∏õ‡πá‡∏ô 2,500"
ü§ñ "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô: ‡πÅ‡∏Å‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤ PU Foam 3 ‡∏ô‡∏¥‡πâ‡∏ß (‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô) ‡∏à‡∏≤‡∏Å 2,350 ‚Üí 2,500 ?"
üë§ "‡πÉ‡∏ä‡πà"
ü§ñ [‡πÄ‡∏£‡∏µ‡∏¢‡∏Å update_cell]
   "‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢: ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å 2,350 ‚Üí 2,500"
```

### Case 3: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
```
üë§ "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà ‡∏ä‡∏∑‡πà‡∏≠ Foam XL ‡∏£‡∏≤‡∏Ñ‡∏≤ 4,500 ‡∏™‡∏ï‡πá‡∏≠‡∏Å 20"
ü§ñ [‡πÄ‡∏£‡∏µ‡∏¢‡∏Å add_row]
   "‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡πÉ‡∏´‡∏°‡πà:
    ‡∏ä‡∏∑‡πà‡∏≠: Foam XL | ‡∏£‡∏≤‡∏Ñ‡∏≤: 4,500 | ‡∏™‡∏ï‡πá‡∏≠‡∏Å: 20
    (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏ñ‡∏ß‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà 251)"
```

### Case 4: ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
```
üë§ "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏´‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô 5,000 ‡∏ö‡πâ‡∏≤‡∏á"
ü§ñ [‡πÄ‡∏£‡∏µ‡∏¢‡∏Å search_in_table ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠ get_rows + filter]
   "‡∏û‡∏ö 8 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô 5,000:
    1. Premium Set A ‚Äî 7,500
    2. Deluxe Package ‚Äî 12,000
    ..."
```

---

## 12. Security & Guardrails

| ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£ | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î |
|---|---|
| **Confirmation before write** | AI ‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡πà‡∏≠‡∏ô write (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ï‡∏£‡∏á) |
| **Token budget** | ‡∏à‡∏≥‡∏Å‡∏±‡∏î 100k tokens ‡∏ï‡πà‡∏≠ session |
| **Tool loop limit** | ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 8 tool calls ‡∏ï‡πà‡∏≠ message |
| **Row delete protection** | ‡∏•‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏•‡∏∞ 1 ‡πÅ‡∏ñ‡∏ß ‡∏´‡πâ‡∏≤‡∏° bulk delete |
| **Backup on first edit** | ‡∏™‡∏£‡πâ‡∏≤‡∏á snapshot ‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å |
| **Auth required** | ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ admin/manager role |
